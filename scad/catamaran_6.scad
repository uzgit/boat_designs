include <../library/roundedcube.scad>

$fn=1000;

width = 75;
height = 100;
length = 420;
tip_width = 20;
tip_height = 30;
rib_length = 10;
inflection_length = 120;
rounding_radius = 5;
thickness=1;

module hull_solid(width, height, length, tip_width, tip_height, rib_length, inflection_length, rounding_radius)
{
    hull()
    {
        translate([0, rib_length/2, 0])
        roundedcube([width, rib_length, height], radius=rounding_radius, center=true, apply_to="y");
        translate([0, inflection_length, 0])
        roundedcube([width, rib_length, height], radius=rounding_radius, center=true);
        translate([0, length/2-rounding_radius, height/2-tip_height/2])
        roundedcube([tip_width, rib_length, tip_height], radius=rounding_radius, center=true);
    }
}

module hull_shell(width, height, length, tip_width, tip_height, rib_length, inflection_length, rounding_radius, thickness)
{
    difference()
    {
        hull_solid(width, height, length, tip_width, tip_height, rib_length, inflection_length, rounding_radius);
        hull_solid(width-thickness, height-thickness, length-thickness, tip_width-thickness, tip_height-thickness, rib_length, inflection_length, rounding_radius);
    }
}

module catamaran_hull(width, height, length, tip_width, tip_height, rib_length, inflection_length, rounding_radius, thickness)
{
    hull_shell(width, height, length, tip_width, tip_height, rib_length, inflection_length, rounding_radius, thickness);

    rotate([0, 0, 180])
    hull_shell(width, height, length, tip_width, tip_height, rib_length, inflection_length, rounding_radius, thickness);
}

module airfoil()
{
    radii = [0.0, 4.080934919018949, 5.692589233515458, 6.895097698752626, 7.884187581834687, 8.73569792801113, 9.488543865292424, 10.165859460740782, 10.782732017358217, 11.349653505240893, 11.874273890864915, 12.362377932969949, 12.818468502789024, 13.246134382828071, 13.648292548364447, 14.027353624718833, 14.385338348636973, 14.723961679820086, 15.044694911212373, 15.348812427928262, 15.637427512311664, 15.911520177164507, 16.171959094757387, 16.419519083854496, 16.654895207353817, 16.878714250477646, 17.0915441509092, 17.293901810560776, 17.48625961601685, 17.66905091934587, 17.842674674973132, 18.00749938620875, 18.16386648304294, 18.312093228284958, 18.45247523012679, 18.585288624381327, 18.71079197797177, 18.8292279559937, 18.940824787280608, 19.045797557463626, 19.144349353712087, 19.23667228143299, 19.322948370010305, 19.403350382035658, 19.478042538308955, 19.54718116908276, 19.61091530051913, 19.669387184066505, 19.722732775403333, 19.771082168699674, 19.814559991188123, 19.853285762390023, 19.88737422179121, 19.916935628289455, 19.942076034329993, 19.962897537296275, 19.97949851042055, 19.99197381521744, 20.000414997216048, 20.004910466567935, 20.005545664935216, 20.002403219911567, 19.99556308809579, 19.98510268782093, 19.971097022438354, 19.953618794965845, 19.93273851482744, 19.908524597341984, 19.88104345655324, 19.850359591938613, 19.81653566948233, 19.779632597554713, 19.739709597998317, 19.696824272786014, 19.651032666583514, 19.602389325519614, 19.550947352441657, 19.49675845890953, 19.439873014160522, 19.380340091258024, 19.3182075106195, 19.253521881103307, 19.186328638819813, 19.11667208381872, 19.04459541479329, 18.97014076193053, 18.893349218027407, 18.814260867983243, 18.732914816771, 18.64934921598213, 18.563601289032867, 18.47570735511357, 18.38570285195699, 18.29362235749574, 18.199499610474525, 18.103367530078188, 18.005258234632386, 17.905203059429876, 17.803232573731833, 17.699376596990486, 17.593664214336115, 17.486123791368833, 17.376782988292966, 17.265668773429237, 17.152807436138133, 17.03822459918525, 16.921945230578004, 16.80399365490101, 16.684393564175778, 16.563168028268922, 16.440339504871687, 16.315929849072106, 16.189960322539882, 16.062451602343167, 15.933423789414855, 15.802896416685467, 15.670888456898465, 15.537418330122948, 15.40250391097814, 15.266162535582772, 15.128411008242354, 14.989265607886068, 14.848742094264846, 14.706855713921218, 14.563621205941264, 14.419052807498108, 14.273164259196406, 14.125968810226123, 13.977479223334296, 13.8277077796221, 13.676666283175026, 13.524366065533117, 13.370817990007774, 13.216032455851817, 13.060019402288686, 12.902788312406507, 12.744348216922724, 12.584707697824161, 12.423874891888062, 12.261857494088197, 12.098662760891093, 11.934297513446438, 11.768768140675789, 11.602080602263701, 11.434240431554743, 11.265252738360223, 11.095122211677927, 10.923853122328195, 10.751449325509402, 10.57791426327587, 10.40325096694111, 10.227462059409023, 10.050549757435798, 9.872515873824911, 9.693361819557678, 9.513088605861677, 9.33169684621919, 9.149186758317787, 8.965558165945119, 8.780810500829816, 8.5949428044304, 8.407953729673824, 8.219841542645733, 8.030604124233596, 7.840238971724717, 7.648743200360373, 7.456113544847673, 7.262346360830446, 7.067437626320642, 6.8713829430913265, 6.6741775380327715, 6.47581626447256, 6.276293603461121, 6.075603665023607, 5.87374018937931, 5.6706965481295, 5.466465745414871, 5.261040419043347, 5.054412841589293, 4.846574921464969, 4.637518203965099, 4.427233872285333, 4.215712748515451, 4.002945294607995, 3.788921613323193, 3.573631449150741, 3.3570641892091913, 3.1392088641236993, 2.920054148882481, 2.6995883636730333, 2.4777994746983945, 2.254675094973904, 2.0302024851055007, 1.8043685540496568, 1.5771598598555814, 1.348562610390347, 1.1185626640472042, 0.8871455304377301, 0.6542963710680777, 0.4199999999999926];

    increment = -0.75;
    hull()
    {
        for( i = [ 1 : len(radii)] )
        {
            translate([0, i * increment, 0])
            circle(r=radii[i]);
        }
    }
}

//airfoil();

//airfoil_shell

module wing()
{
    hull()
    {
        linear_extrude(0.1)
        airfoil();
        
        translate([0, 0, 80])
        linear_extrude(0.1)
        airfoil();
        
        translate([0, 0, 200])
        linear_extrude(0.1)
        scale(0.8)
        airfoil();
    }
}

translate([0, 100, 75])
wing();
//difference()
//{
//    wing();
//    
//    translate([0, -0.75, 0])
//    scale([0.975, 0.985, 0.975])
//    wing();
//}

//x_offset = 100;
//
//for( x_translation = [-x_offset, x_offset] )
//{
//    translate([x_translation, 0, 0])
//    catamaran_hull(width, height, length, tip_width, tip_height, rib_length, inflection_length, rounding_radius, thickness);
//}

//hull()
//{
//    roundedcube([width, rib_length, height], radius=rounding_radius, center=true, apply_to="y");
//    translate([0, inflection_length, 0])
//    roundedcube([width, rib_length, height], radius=rounding_radius, center=true);
//    translate([0, length/2-rounding_radius, height/2-tip_height/2])
//    roundedcube([tip_width, rib_length, tip_height], radius=rounding_radius, center=true);
//}
//
//rotate([0, 0, 180])
//hull()
//{
//    roundedcube([width, rib_length, height], radius=rounding_radius, center=true, apply_to="y");
//    translate([0, inflection_length, 0])
//    roundedcube([width, rib_length, height], radius=rounding_radius, center=true);
//    translate([0, length/2-rounding_radius, height/2-tip_height/2])
//    roundedcube([tip_width, rib_length, tip_height], radius=rounding_radius, center=true);
//}